namespace = tho_battle

#无敌
ship_event = {
	id = tho_battle.22
	is_triggered_only = yes
	hide_window = yes
	trigger = {
             solar_system = {
                any_fleet_in_system = {
                    tho_disable_repair = yes
                }
        }
	}
	immediate = {
        tho_battle_disable_repair = yes
	}
}




#恒星类型选择
country_event = {
    id = tho_battle.8080
    diplomatic = yes
    is_triggered_only = yes
    custom_gui = ten_windows
    custom_gui_option = option_ten
    immediate = {
        hidden_effect = {
            set_variable = { which = tho_star_select_search_page value = 1 }
            set_variable = { which = tho_stars_page_num value = 1 }
        }
    }
    option = {
        name = "option_a"
        set_country_flag = tho_select_a
            hidden_effect = {
                tho_system_class_select = yes
                country_event = { id = tho_battle.8082 }
            }


    }
    option = {
        name = "option_b"
        set_country_flag = tho_select_b
        hidden_effect = {
            tho_system_class_select = yes
            country_event = { id  =tho_battle.8082}
        }
    }
    option = {
        name = "option_f"
        set_country_flag = tho_select_f
        hidden_effect = {
            tho_system_class_select = yes
            country_event = { id  =tho_battle.8082}
        }
    }
    option = {
        name = "option_g"
        set_country_flag = tho_select_g
        hidden_effect = {
            tho_system_class_select = yes
            country_event = { id  =tho_battle.8082}
        }
    }
    option = {
        name = "option_k"
        set_country_flag = tho_select_k
        hidden_effect = {
            tho_system_class_select = yes
            country_event = { id  =tho_battle.8082}
        }
    }
    option = {
        name = "option_m"
        set_country_flag = tho_select_m
        hidden_effect = {
            tho_system_class_select = yes
            country_event = { id  =tho_battle.8082}
        }
    }
    option = {
        name = "option_t"
        set_country_flag = tho_select_t
        hidden_effect = {
            tho_system_class_select = yes
            country_event = { id  =tho_battle.8082}
        }
    }
    option = {
        name = "option_bh"
        set_country_flag = tho_select_bh
        hidden_effect = {
            tho_system_class_select = yes
            country_event = { id  =tho_battle.8082}
        }
    }
    option = {
        name = "option_nue"
        set_country_flag = tho_select_nue
        hidden_effect = {
            tho_system_class_select = yes
            country_event = { id  =tho_battle.8082}
        }
    }
    option = {
        name = "option_pul"
        set_country_flag = tho_select_pul
        hidden_effect = {
            tho_system_class_select = yes
            country_event = { id  =tho_battle.8082}
        }

    }
    option = {
        name = "option_bi"
        set_country_flag = tho_select_bi
        hidden_effect = {
            tho_system_class_select = yes
            country_event = { id  =tho_battle.8082}
        }
    }
    option = {
        name = "option_tri"
        set_country_flag = tho_select_tri
        hidden_effect = {
            tho_system_class_select = yes
            country_event = { id  =tho_battle.8082}
        }
    }
    option = {
        name = exit
        hidden_effect = {
            country_event = {
                id = Nyan_Battle.761
            }
        }
    }
}
#选择恒星
country_event = {
    id = tho_battle.8082
    is_triggered_only = yes
    diplomatic = yes
    custom_gui = ten_windows
    custom_gui_option = option_ten
    immediate = {
    }
    option = {
        name = "THO_select_system_01"
        trigger = {exists = event_target:tho_system_selectlock_system_1}
        event_target:tho_system_selectlock_system_1 = {
            save_global_event_target_as = ghost_solar_system
            if = {
                limit = {has_global_flag = NyanNyan_chuansong}
                NyanNyan_chuansong = yes
            }
            else = {
                every_fleet_in_system = {
                    set_timed_fleet_flag = {
                        flag = time_ghost
                        days = 180
                    }
                    set_location =solar_system
                }
            }
        }
    }
    option = {
        name = "THO_select_system_02"
        trigger = {exists = event_target:tho_system_selectlock_system_2}
        event_target:tho_system_selectlock_system_2 = {
            save_global_event_target_as = ghost_solar_system
            if = {
                limit = {has_global_flag = NyanNyan_chuansong}
                NyanNyan_chuansong = yes
            }
            else = {
                every_fleet_in_system = {
                    set_timed_fleet_flag = {
                        flag = time_ghost
                        days = 180
                    }
                    set_location =solar_system
                }
            }
        }
    }
    option = {
        name = "THO_select_system_03"
        trigger = {exists = event_target:tho_system_selectlock_system_3}
        event_target:tho_system_selectlock_system_3 = {
            save_global_event_target_as = ghost_solar_system
            if = {
                limit = {has_global_flag = NyanNyan_chuansong}
                NyanNyan_chuansong = yes
            }
            else = {
                every_fleet_in_system = {
                    set_timed_fleet_flag = {
                        flag = time_ghost
                        days = 180
                    }
                    set_location =solar_system
                }
            }
        }
    }
    option = {
        name = "THO_select_system_04"
        trigger = {exists = event_target:tho_system_selectlock_system_4}
        event_target:tho_system_selectlock_system_4 = {
            save_global_event_target_as = ghost_solar_system
            if = {
                limit = {has_global_flag = NyanNyan_chuansong}
                NyanNyan_chuansong = yes
            }
            else = {
                every_fleet_in_system = {
                    set_timed_fleet_flag = {
                        flag = time_ghost
                        days = 180
                    }
                    set_location =solar_system
                }
            }
        }
    }
    option = {
        name = "THO_select_system_05"
        trigger = {exists = event_target:tho_system_selectlock_system_5}
        event_target:tho_system_selectlock_system_5 = {
            save_global_event_target_as = ghost_solar_system
            if = {
                limit = {has_global_flag = NyanNyan_chuansong}
                NyanNyan_chuansong = yes
            }
            else = {
                every_fleet_in_system = {
                    set_timed_fleet_flag = {
                        flag = time_ghost
                        days = 180
                    }
                    set_location =solar_system
                }
            }
        }
    }
    option = {
        name = "THO_select_system_06"
        trigger = {exists = event_target:tho_system_selectlock_system_6}
        event_target:tho_system_selectlock_system_6 = {
            save_global_event_target_as = ghost_solar_system
            if = {
                limit = {has_global_flag = NyanNyan_chuansong}
                NyanNyan_chuansong = yes
            }
            else = {
                every_fleet_in_system = {
                    set_timed_fleet_flag = {
                        flag = time_ghost
                        days = 180
                    }
                    set_location =solar_system
                }
            }
        }
    }
    option = {
        name = "THO_select_system_07"
        trigger = {exists = event_target:tho_system_selectlock_system_7}
        event_target:tho_system_selectlock_system_7 = {
            save_global_event_target_as = ghost_solar_system
            if = {
                limit = {has_global_flag = NyanNyan_chuansong}
                NyanNyan_chuansong = yes
            }
            else = {
                every_fleet_in_system = {
                    set_timed_fleet_flag = {
                        flag = time_ghost
                        days = 180
                    }
                    set_location =solar_system
                }
            }
        }
    }
    option = {
        name = "THO_select_system_08"
        trigger = {exists = event_target:tho_system_selectlock_system_8}
        event_target:tho_system_selectlock_system_8 = {
            save_global_event_target_as = ghost_solar_system
            if = {
                limit = {has_global_flag = NyanNyan_chuansong}
                NyanNyan_chuansong = yes
            }
            else = {
                every_fleet_in_system = {
                    set_timed_fleet_flag = {
                        flag = time_ghost
                        days = 180
                    }
                    set_location =solar_system
                }
            }
        }
    }
    option = {
        name = "THO_select_system_09"
        trigger = {exists = event_target:tho_system_selectlock_system_9}
        event_target:tho_system_selectlock_system_9 = {
            save_global_event_target_as = ghost_solar_system
            if = {
                limit = {has_global_flag = NyanNyan_chuansong}
                NyanNyan_chuansong = yes
            }
            else = {
                every_fleet_in_system = {
                    set_timed_fleet_flag = {
                        flag = time_ghost
                        days = 180
                    }
                    set_location =solar_system
                }
            }
        }
    }
    option = {
        name = "THO_select_system_10"
        trigger = {exists = event_target:tho_system_selectlock_system_10}
        event_target:tho_system_selectlock_system_10 = {
            save_global_event_target_as = ghost_solar_system
            if = {
                limit = {has_global_flag = NyanNyan_chuansong}
                NyanNyan_chuansong = yes
            }
            else = {
                every_fleet_in_system = {
                    set_timed_fleet_flag = {
                        flag = time_ghost
                        days = 180
                    }
                    set_location =solar_system
                }
            }
        }
    }
    option = {
        name = "THO_select_page_up"
        allow = {
            custom_tooltip = "check_select_page"
            check_variable = { which = tho_star_select_search_page value > 1  }
        }
        tho_clear_system_event_targets = yes
        subtract_variable = { which = tho_star_select_search_page value = 1 }
        change_variable = { which = tho_stars_page_num value = 1 }
        tho_star_select_page_trigger =yes
        country_event = { id = tho_battle.8082 }
    }
    option = {
        name = "THO_select_page_down"
        allow = {
            custom_tooltip = "check_select_page_num"
            check_variable = { which = tho_stars_page_num value > 1  }
        }
        tho_clear_system_event_targets = yes
        change_variable = { which = tho_star_select_search_page value = 1 }
        subtract_variable = { which = tho_stars_page_num value = 1 }
        tho_star_select_page_trigger =yes
        country_event = { id = tho_battle.8082 }
    }
    option = {
        name = exit
        hidden_effect = {
            tho_cleat_system_class_select = yes
            country_event = {
                id = tho_battle.8080
            }
        }
    }
    #after = {
    #    tho_cleat_system_class_select = yes
    #}
}
#选择帝国
country_event = {
    id = tho_battle.8081
    diplomatic = yes
    is_triggered_only = yes
    custom_gui = ten_windows
    custom_gui_option = option_ten
    immediate = {
    }
    option = {
        name = tho_target_country_01
        trigger = {exists = event_target:tho_country_select_target_1}
        event_target:tho_country_select_target_1 = {
            Nyan_fate = yes
        }
    }
    option = {
        name = tho_target_country_02
        trigger = {exists = event_target:tho_country_select_target_2}
        event_target:tho_country_select_target_2 = {
             Nyan_fate = yes
        }
    }
    option = {
        name = tho_target_country_03
        trigger = {exists = event_target:tho_country_select_target_3}
        event_target:tho_country_select_target_3 = {
             Nyan_fate = yes
        }
    }
    option = {
        name = tho_target_country_04
        trigger = {exists = event_target:tho_country_select_target_4}
        event_target:tho_country_select_target_4 = {
             Nyan_fate = yes
        }
    }
    option = {
        name = tho_target_country_05
        trigger = {exists = event_target:tho_country_select_target_5}
        event_target:tho_country_select_target_5 = {
             Nyan_fate = yes
        }
    }
    option = {
        name = tho_target_country_06
        trigger = {exists = event_target:tho_country_select_target_6}
        event_target:tho_country_select_target_6 = {
             Nyan_fate = yes
        }
    }
    option = {
        name = tho_target_country_07
        trigger = {exists = event_target:tho_country_select_target_7}
        event_target:tho_country_select_target_7 = {
             Nyan_fate = yes
        }
    }
    option = {
        name = tho_target_country_08
        trigger = {exists = event_target:tho_country_select_target_8}
        event_target:tho_country_select_target_8 = {
             Nyan_fate = yes
        }
    }
    option = {
        name = tho_target_country_09
        trigger = {exists = event_target:tho_country_select_target_9}
        event_target:tho_country_select_target_9 = {
             Nyan_fate = yes
        }
    }
    option = {
        name = tho_target_country_10
        trigger = {exists = event_target:tho_country_select_target_10}
        event_target:tho_country_select_target_10 = {
             Nyan_fate = yes
        }
    }
    option = {
        name = "THO_select_page_up"
        allow = {
            custom_tooltip = "check_select_page"
            check_variable = { which = Tho_country_select_page value > 1  }
        }
        tho_clear_country_event_targets = yes
        subtract_variable = { which = Tho_country_select_page value = 1 }
        change_variable = { which = tho_country_page_num value = 1 }
        tho_save_country_event_trigger =yes
        country_event = { id = tho_battle.8081 }
    }
    option = {
        name = "THO_select_page_down"
        allow = {
            custom_tooltip = "check_select_page_num"
            check_variable = { which = tho_country_page_num value > 0  }
        }
        tho_clear_country_event_targets = yes
        change_variable = { which = Tho_country_select_page value = 1 }
        subtract_variable = { which = tho_country_page_num value = 1 }
        tho_save_country_event_trigger =yes
        country_event = { id = tho_battle.8081 }
    }
    option = {
        name = exit
        tho_clear_all_country_flags = yes
        country_event = { id = Nyan_Battle.761 }
    }
}

country_event = {
    id = tho_battle.20
    title = tho_war.2.name
    desc = tho_war.2.desc
    #picture = GFX_evt_sapient_AI
    is_triggered_only = yes
    option = {
        name = option_war_2
        target_country_fire = yes
    }
}

